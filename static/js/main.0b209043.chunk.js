(this.webpackJsonpfemusic=this.webpackJsonpfemusic||[]).push([[0],{103:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(230),r=function(e){return{type:n.a,payload:e}}},230:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="SET_USER"},375:function(e,t,a){"use strict";a.d(t,"a",(function(){return z}));var n=a(6),r=a(20),i=(a(427),a(19)),s=a.n(i),c=a(2),o=a.n(c),l=a(12);function u(e){var t=e.shown,a=e.lists,n=e.listSelected,i=e.nowPlaying,s=t?{zIndex:"1",display:"block"}:{zIndex:"-1",display:"none"},c=a?a.map((function(e,t){return Object(r.jsxs)("h2",{onClick:function(){return n(e)},style:i===e?{background:"green"}:{},children:[e," Songs"]},t)})):null;return Object(r.jsx)("div",{id:"list-select",style:s,children:c})}var d=a(21);function m(e){var t=e.cam,a=e.url,n=e.goBack,s=e.send,c=e.setcanvUri,o=Object(i.useRef)(null);return Object(i.useEffect)((function(){if(t){o.current.getContext("2d").drawImage(a,0,0,o.current.width,o.current.height);var e=o.current.toDataURL();c(e)}}),[o,t,a]),Object(r.jsxs)(r.Fragment,{children:[t?Object(r.jsx)("canvas",{style:{display:"block",margin:"auto"},ref:o,width:"400",height:"400"}):Object(r.jsx)("img",{src:a,alt:"userImage",style:{width:"400px",height:"400px",display:"block",margin:"auto"}}),Object(r.jsx)("button",{className:"designedButton",onClick:n,children:"Go Back"}),Object(r.jsx)("button",{className:"designedButton",onClick:s,id:"done",children:"Send"})]})}var p=a(76),f=a.n(p),b=a(178),h={position:"bottom-left",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},j=function(e){e&&e.response&&e.response.data&&e.response.data.msg&&b.b.error(e.response.data.msg,h)},g=function(e){b.b.success(e,h)},v=a(179),O="http://localhost:8000",_=function(e){var t,a=e.setEmPl,s=e.findEmotion,c=Object(i.useRef)(null),u=Object(i.useRef)(null),p=Object(i.useState)(!1),b=Object(n.a)(p,2),h=b[0],_=b[1],y=Object(i.useState)(null),x=Object(n.a)(y,2),w=x[0],k=x[1],S=Object(i.useState)(""),N=Object(n.a)(S,2),E=N[0],C=N[1],D=Object(i.useState)(null),T=Object(n.a)(D,2),P=T[0],q=T[1],F=Object(i.useState)(!1),A=Object(n.a)(F,2),B=A[0],I=A[1],L=Object(i.useState)(!1),U=Object(n.a)(L,2),M=U[0],R=U[1],K=Object(i.useState)(void 0),J=Object(n.a)(K,2),z=J[0],H=J[1];return Object(i.useEffect)((function(){E.length&&_(!0),Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B){e.next=8;break}return e.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:t=e.sent,window.stream=t,u.current.srcObject=t,e.next=9;break;case 8:window.stream&&window.stream.getTracks().forEach((function(e){e.stop()}));case 9:case"end":return e.stop()}}),e)})))()}),[E,P,B]),P&&h&&(t=Object(r.jsxs)("p",{style:{fontWeight:"bolder",textAlign:"center",fontSize:"2em",background:"black"},children:["Emotion is ",P]})),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{onClick:function(){return s(!1)},children:"\xd7"}),h?Object(r.jsx)(m,{cam:M,url:E,goBack:function(){_(!1)},send:function(e){if(e.preventDefault(),M)f()({url:"".concat(O,"/emotion"),method:"POST",data:{uri:z}}).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,i,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,v.b("".concat(O,"/models/model.json"));case 3:r=e.sent,(i=new Image).src=z,(s=document.createElement("canvas")).width=48,s.height=48,c=s.getContext("2d"),i.onload=Object(l.a)(o.a.mark((function e(){var t,l,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.drawImage(i,n.x,n.y,n.width,n.height,0,0,s.width,s.height),t=v.a.fromPixels(s,1).div(255).toFloat().expandDims(0),e.next=4,r.predict(t).data();case 4:l=e.sent,u=["Angry","Disgust","Fear","Happy","Sad","Surprise","Neutral"],m=Object.values(l).findIndex((function(e){return e===Math.max.apply(Math,Object(d.a)(Object.values(l)))})),q(u[m]),a(u[m]),g(u[m]);case 10:case"end":return e.stop()}}),e)})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(e)}));else{var t=new FormData;t.append("img",w),f()({url:"".concat(O,"/emotion"),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t}).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,i,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,v.b("".concat(O,"/models/model.json"));case 3:r=e.sent,(i=new Image).src=E,(s=document.createElement("canvas")).width=48,s.height=48,c=s.getContext("2d"),i.onload=Object(l.a)(o.a.mark((function e(){var t,l,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.drawImage(i,n.x,n.y,n.width,n.height,0,0,s.width,s.height),t=v.a.fromPixels(s,1).div(255).toFloat().expandDims(0),e.next=4,r.predict(t).data();case 4:l=e.sent,u=["Angry","Disgust","Fear","Happy","Sad","Surprise","Neutral"],m=Object.values(l).findIndex((function(e){return e===Math.max.apply(Math,Object(d.a)(Object.values(l)))})),q(u[m]),a(u[m]),g(u[m]);case 10:case"end":return e.stop()}}),e)})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){j(e)}))}},setcanvUri:function(e){H(e)}}):Object(r.jsx)(r.Fragment,{children:B?Object(r.jsxs)("div",{children:[Object(r.jsx)("video",{style:{display:"block",margin:"auto"},ref:u,width:"400",height:"400",autoPlay:!0}),Object(r.jsx)("button",{className:"designedButton",onClick:function(e){e.preventDefault(),C(u.current),I(!1),R(!0),_(!0)},children:"Capture"})]}):Object(r.jsxs)("div",{className:"choose",children:[Object(r.jsxs)("div",{className:"file",onClick:function(){c.current.click()},children:[Object(r.jsx)("i",{className:"fa fa-file-image fa-5x"}),Object(r.jsx)("h3",{children:"Choose from a File"}),Object(r.jsx)("input",{id:"fileChoose",type:"file",ref:c,onChange:function(e){var t=e.target.files[0];k(t),C(URL.createObjectURL(t)),R(!1)}})]}),Object(r.jsxs)("div",{className:"camera",onClick:function(){return I(!0)},children:[Object(r.jsx)("i",{className:"fa fa-camera fa-5x"}),Object(r.jsx)("h3",{children:"Capture from Camera"})]})]})}),t]})},y=a(103),x=a(100),w=Object(i.lazy)((function(){return a.e(4).then(a.bind(null,609))})),k=Object(i.lazy)((function(){return a.e(3).then(a.bind(null,604))})),S=Object(i.lazy)((function(){return a.e(5).then(a.bind(null,605))})),N=Object(i.lazy)((function(){return a.e(6).then(a.bind(null,606))})),E=Object(i.lazy)((function(){return a.e(7).then(a.bind(null,607))}));var C=Object(x.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e(Object(y.a)(t))}}}))((function(e){var t=e.allSongs,a=e.playlistFromEmotion,s=e.findEmotion,c=e.dispProfile,d=e.user,m=e.setUser,p=Object(i.useState)(!1),b=Object(n.a)(p,2),h=b[0],j=b[1],g=Object(i.useState)(!1),v=Object(n.a)(g,2),_=v[0],y=v[1],x=Object(i.useState)("Happy"),C=Object(n.a)(x,2),D=C[0],T=C[1],P=Object(i.useState)(null),q=Object(n.a)(P,2),F=q[0],A=q[1],B=Object(i.useState)(!1),I=Object(n.a)(B,2),L=I[0],U=I[1],M=Object(i.useState)(null),R=Object(n.a)(M,2),K=R[0],J=R[1],z=Object(i.useState)(0),H=Object(n.a)(z,2),V=H[0],W=H[1],$=Object(i.useState)(0),G=Object(n.a)($,2),Y=G[0],Q=G[1],X=Object(i.useState)(!1),Z=Object(n.a)(X,2),ee=Z[0],te=Z[1],ae=Object(i.useState)(!1),ne=Object(n.a)(ae,2),re=ne[0],ie=ne[1],se=Object(i.useRef)(null);Object(i.useEffect)((function(){Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))();var e=t.filter((function(e){return e.emotion===D}));A(e),J(e[0])}),[]),Object(i.useEffect)((function(){Object(l.a)(o.a.mark((function e(){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se.current.addEventListener("loadedmetadata",Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se.current){e.next=6;break}return e.t0=Q,e.next=4,se.current.duration;case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))),se.current.addEventListener("timeupdate",Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!se.current){e.next=6;break}return e.t0=W,e.next=4,se.current.currentTime;case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))),K&&(re?A([K]):(n=t.filter((function(e){return e.emotion===D})),A(n))),a&&a!==D&&(r=t.filter((function(e){return e.emotion===a})),T(a),A(r),J(r[0])),L?se.current.play():se.current.pause();case 5:case"end":return e.stop()}}),e)})))()}),[d,K,L,re,D,a]);var ce=function(e,t){return e.indexOf(t)},oe=[];return t.forEach((function(e){oe.indexOf(e.emotion)<0&&oe.push(e.emotion)})),Object(r.jsxs)("div",{className:"bg",children:[Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("audio",{ref:se,src:K?K.src:""})}),Object(r.jsxs)("section",{className:"player",children:[Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)(i.Suspense,{fallback:Object(r.jsx)("div",{children:"Loading..."}),children:[Object(r.jsx)(E,{topIconHandler:function(e){var t;"wishlist"===e?(d.songs&&(t=d.songs.findIndex((function(e){return e.title===K.title}))>-1?"remove":"add",f()({url:"".concat(O,"/user/").concat(d._id),method:"PUT",headers:{"Content-Type":"application/json",Authorization:JSON.parse(localStorage.getItem("$token$"))},data:{action:t,song:K}}).then((function(e){return m(e.data)})).catch(console.log)),te((function(e){return!e}))):"emotionFinder"===e&&s(!0)},dispProfile:c,color:d.songs?d.songs.findIndex((function(e){return e.title===K.title}))>-1?"red":"black":ee?"red":"black"}),h?Object(r.jsx)(N,{songs:F,emotion:D,playThis:function(e){J(e),T(e.emotion),U(!0)},currentPlaying:K,playing:L}):Object(r.jsx)(S,{img:K?K.img:"",max:Y,title:K?K.title:"",artist:K?K.artist:"",currentTime:V}),Object(r.jsx)(w,{playerButtonHandler:function(e){if("play-pause"===e)U((function(e){return!e}));else if("next"===e){var t=ce(F,K);t=t===F.length-1?-1:t,J(F[t+1])}else if("previous"===e){var a=ce(F,K);a=0===a?F.length:a,J(F[a-1])}else"retweet"===e?ie(!re):"random"===e&&A((function(e){return function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}(e)}))},playing:!!L,changeCurrentMusicTime:function(e){e!==se.current.currentTime&&(se.current.currentTime=e,W(e))},currentMusicTime:V,max:Y}),Object(r.jsx)(k,{songName:h?K.title:null,rightColor:_?"blue":"black",leftColor:h?"blue":"black",handleBottomButtons:function(e){"playlist"===e?j((function(e){return!e})):"listSelector"===e&&y((function(e){return!e}))}})]})}),_?Object(r.jsx)(u,{shown:"true",listSelected:function(e){e&&(j(!0),T(e),y(!1))},lists:oe,nowPlaying:K?K.emotion:D}):null]})]})})),D=[{title:"Aankhein Milayenge Darr Se",artist:"K. MOHAN,NEHA BHASIN",emotion:"Fear",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741318/music/Aankhein_Milayenge_Darr_Se_Video_Song_Neerja_Sonam_Kapoor_Prasoon_Joshi_T-Series_qupdjj.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803043/images/Aankhein_Milayenge_Darr_Se_jtzgv3.jpg"},{title:"Pachtaoge",artist:"Arijit Singh",emotion:"Sad",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741321/music/Arijit_Singh_Pachtaoge_Vicky_Kaushal_Nora_Fatehi_Jaani_B_Praak_Arvindr_Khaira_Bhushan_K_cyqzui.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803046/images/Pachtaoge_o2qqkg.png"},{title:"Bhaag D.K Bose",artist:"Azee Jzee Music",emotion:"Disgust",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741337/music/Bhaag_D.K_Bose_-_Delhi_Belly720p_HD_jo0qkq.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803043/images/Bhaag_DK_Bose_w1foi4.jpg"},{title:"Allare",artist:"Deepak Bajracharya",emotion:"Happy",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741330/music/Deepak_Bajracharya_-_AllareNew_Nepali_Song_yyqro0.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803044/images/Allare_vosdbv.jpg"},{title:"Start a Fire",artist:"John Legend",emotion:"Neutral",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741303/music/Official_Clip_from_La_La_Land_-_John_Legend_-_Start_a_Fire_ekwcoi.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803045/images/Start_A_Fire_igunjt.jpg"},{title:"Basket Case",artist:"Green Day",emotion:"Angry",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741328/music/Green_Day_-_Basket_Case_Official_Music_Video_j2ke2h.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803044/images/Basket_Case_ths2jc.jpg"},{title:"Jaula Relaima",artist:"Kamal Khatri,Simple Kharel",emotion:"Neutral",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741332/music/JAULA_RELAIMA_-_Simpal_KharelNew_Nepali_Song_2020Official_Music_Video_FEMALE_VERSION_i9jjso.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803045/images/Jaula_Relaima_id9vfu.jpg"},{title:"JEE KARDA",artist:"Divya Kumar",emotion:"Angry",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741331/music/Jee_Karda_Official_Full_Song_Badlapur_Varun_Dhawan___Yami_Gautam_bfb1f7.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803045/images/JEE_KARDA_ctyts5.jpg"},{title:"Absence of fear",artist:"Jewel",emotion:"Fear",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741334/music/JEWEL_-_Absence_of_fear_with_Lyrics_nggbwi.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803043/images/Absence_of_fear_hymoo4.jpg"},{title:"Lai Lai",artist:"Ketan Chettri",emotion:"Sad",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741336/music/Lai_Lai_-Prasad_Nepali_Movie_Lyrical_Song_Video_Bipin_Karki_Nischal_Basnet_Namrata_Shrest_wf7wvg.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803045/images/Lai_Lai_fmmlmn.jpg"},{title:"Smells Like Teen Spirit",artist:"Nirvana",emotion:"Happy",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741344/music/Nirvana_-_Smells_Like_Teen_Spirit_Official_Music_Video_etpaaf.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803045/images/Smells_Like_Teen_Spirit_gtcscb.jpg"},{title:"Boneyards",artist:"Parkway Drive",emotion:"Disgust",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741304/music/Parkway_Drive_-_Boneyards_sjttzr.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803044/images/Boneyards_ywmot0.jpg"},{title:"Colors Of The Rainbow",artist:"Sevenn,Kathy",emotion:"Neutral",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741312/music/Sevenn_feat._Kathy_-_Colors_Of_The_Rainbow_vfrj8n.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803044/images/Colors_Of_The_Rainbow_rni7ij.jpg"},{title:"Gala Pukka",artist:"Sujan Chapagain",emotion:"Surprise",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741315/music/Sujan_ChapagainGala_Pukka_-_Ma_Fakauchu_Bhanera_Hola_Official_Lyrical_Video_czz4hk.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803045/images/Gala_Pukka_ext3cn.jpg"},{title:"Take Me To Your Heat",artist:"Michael Learns To Rock",emotion:"Happy",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741307/music/Take_me_to_your_heart_hbxc1w.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803046/images/Take_Me_To_Your_Heat_je2b5j.jpg"},{title:"Still Dont Seem To Care",artist:"Talk In Tongues",emotion:"Disgust",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741328/music/Talk_In_Tongues_-_Still_Dont_Seem_To_Care_Official_Video_pqcxus.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803046/images/Still_Dont_Seem_To_Care_jhsyu3.jpg"},{title:"The Best Day",artist:"Taylor Swift",emotion:"Surprise",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741313/music/Taylor_Swift_-_The_Best_Day_dl8qpv.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803046/images/The_Best_Day_o1yery.jpg"},{title:"Wildest dreams",artist:"Taylor Swift",emotion:"Surprise",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741312/music/Taylor_Swift_-_Wildest_Dreams_zoxhna.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803046/images/Wildest_dreams_dfz40b.jpg"},{title:"VIRUS",artist:"VIRUS-KUSHAL KHATRI",emotion:"Angry",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741316/music/VIRUS_-_MR_NEPALINEW_NEPALI_RAP_SONG-_2019KUSHAL_KHATRI_id1a0l.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803047/images/VIRUS_rxmjj6.jpg"},{title:"Broken",artist:"Woren Webbe",emotion:"Sad",src:"https://res.cloudinary.com/dwlybq7v4/video/upload/v1604741322/music/Woren_Webbe_-_Broken_Song_New_English_Sad_Love_Song_2020_R_B_2020_k8cbdb.mp3",img:"https://res.cloudinary.com/dwlybq7v4/image/upload/v1604803044/images/Broken_bl6kyy.jpg"}],T=a(59),P=a(60),q=a(5),F=a(10),A=a(14),B=a(15),I=function(e){Object(A.a)(a,e);var t=Object(B.a)(a);function a(){var e;return Object(q.a)(this,a),(e=t.call(this)).formChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{formDet:Object(P.a)(Object(P.a)({},e.formDet),{},Object(T.a)({},n,r))}}),(function(){e.validator(n)}))},e.validator=function(t){e.state.formDet[t].length>0?"email"!==t||e.state.formDet[t].includes("@")?"email"===t&&e.state.takenEmail.indexOf(e.state.formDet[t])>-1||"userName"===t&&e.state.takenUserName.indexOf(e.state.formDet[t])>-1?e.setState((function(e){return{formErr:Object(P.a)(Object(P.a)({},e.formErr),{},Object(T.a)({},t,t+" already taken"))}})):"password"===t&&e.state.formDet[t].length<8?e.setState((function(e){return{formErr:Object(P.a)(Object(P.a)({},e.formErr),{},Object(T.a)({},t,"Password length less than 8"))}})):e.setState((function(e){return{formErr:Object(P.a)(Object(P.a)({},e.formErr),{},Object(T.a)({},t,""))}})):e.setState((function(e){return{formErr:Object(P.a)(Object(P.a)({},e.formErr),{},Object(T.a)({},t,"Invalid Email"))}})):e.setState((function(e){return{formErr:Object(P.a)(Object(P.a)({},e.formErr),{},Object(T.a)({},t,"Empty Field"))}}))},e.submit=function(t){if(t.preventDefault(),e.state.forgotP){var a={email:e.state.formDet.email};e.state.takenEmail.indexOf(a.email)>-1?f()({url:"".concat(O,"/auth/forgot-password"),method:"POST",headers:{"Content-Type":"application/json"},data:a}).then((function(e){g("We have sent you a message at ".concat(a.email))})).catch((function(e){j(e)})):j({response:{data:{msg:"Email not found!"}}})}else{var n,r=Object.values(e.state.formErr).every((function(e){return 0===e.length}));e.state.register||e.state.forgotP||(r=!0),n=e.state.register&&!e.state.forgotP?"".concat(O,"/auth/register"):"".concat(O,"/auth/login"),r&&f()({url:n,method:"POST",headers:{"Content-Type":"application/json"},data:e.state.formDet}).then((function(t){localStorage.setItem("$token$",JSON.stringify(t.data.token)),e.props.setUser(t.data.user),g("Hello ".concat(t.data.user.userName)),e.props.dispForm(!1)})).catch((function(e){j(e)}))}},e.state={register:!1,forgotP:!1,takenEmail:[],takenUserName:[],formErr:{email:"Empty field",userName:"Empty field",password:"Empty field"},formDet:{email:"",userName:"",password:""}},e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){var e=this;f()({url:"".concat(O,"/auth/checkDuplicate"),method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{}}).then((function(t){var a=[],n=[];t.data.forEach((function(e){a.push(e.email),n.push(e.userName)})),e.setState({takenEmail:a,takenUserName:n})}))}},{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{onClick:function(){return e.props.dispForm(!1)},children:"\xd7"}),Object(r.jsx)("main",{className:"pa4 black-80",children:Object(r.jsxs)("form",{className:"measure center",children:[Object(r.jsxs)("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0",children:[Object(r.jsx)("legend",{className:"f4 fw6 ph0 mh0",children:this.state.forgotP?"Forgot-Password":this.state.register?"Sign Up":"Sign In"}),Object(r.jsx)("div",{className:"mt3",children:this.state.forgotP?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address",children:"Email"}),Object(r.jsx)("input",{onChange:this.formChange,className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"email",value:this.state.formDet.email,id:"userName"})]}):this.state.register?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address",children:"Email"}),Object(r.jsx)("input",{onChange:this.formChange,className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email",id:"email-address",value:this.state.formDet.email}),Object(r.jsx)("p",{style:{color:"red"},children:this.state.formErr.email}),Object(r.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"userName",children:"Username"}),Object(r.jsx)("input",{onChange:this.formChange,className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"userName",value:this.state.formDet.userName,id:"userName"}),Object(r.jsx)("p",{style:{color:"red"},children:this.state.formErr.userName})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address",children:"Email or Username"}),Object(r.jsx)("input",{onChange:this.formChange,className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"userName",value:this.state.formDet.userName,id:"userName"})]})}),this.state.forgotP?null:Object(r.jsxs)("div",{className:"mv3",children:[Object(r.jsx)("label",{className:"db fw6 lh-copy f6",htmlFor:"password",children:"Password"}),Object(r.jsx)("input",{onChange:this.formChange,className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",value:this.state.formDet.password}),this.state.register?Object(r.jsx)("p",{style:{color:"red"},children:this.state.formErr.password}):null]})]}),Object(r.jsx)("div",{className:"",children:this.state.forgotP?Object(r.jsx)("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",onClick:this.submit,value:"Submit"}):this.state.register?Object(r.jsx)("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",onClick:this.submit,value:"Sign up"}):Object(r.jsx)("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",onClick:this.submit,value:"Sign in"})}),Object(r.jsx)("div",{className:"lh-copy mt3",children:this.state.forgotP?Object(r.jsx)("span",{className:"f6 link dim black db",onClick:function(){return e.setState({forgotP:!1,formDet:{email:"",password:"",userName:""},formErr:{email:"Empty field",userName:"Empty field",password:"Empty field"}})},children:"Go Back"}):this.state.register?Object(r.jsx)("span",{className:"f6 link dim black db",onClick:function(){return e.setState({register:!1,formDet:{email:"",password:"",userName:""},formErr:{email:"Empty field",userName:"Empty field",password:"Empty field"}})},children:"Sign in"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("span",{className:"f6 link dim black db",onClick:function(){return e.setState({register:!0,formDet:{email:"",password:"",userName:""},formErr:{email:"Empty field",userName:"Empty field",password:"Empty field"}})},children:"Sign up"}),Object(r.jsx)("a",{href:"#0",className:"f6 link dim black db",onClick:function(){return e.setState({forgotP:!0})},children:"Forgot your password?"})]})})]})})]})}}]),a}(s.a.Component),L=Object(x.b)(null,(function(e){return{setUser:function(t){return e(Object(y.a)(t))}}}))(I),U=a(82),M=a.n(U),R=(document.getElementById("root"),document.getElementById("modal")),K=function(e){Object(A.a)(a,e);var t=Object(B.a)(a);function a(e){var n;return Object(q.a)(this,a),(n=t.call(this,e)).el=document.createElement("div"),n}return Object(F.a)(a,[{key:"componentDidMount",value:function(){R.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){R.removeChild(this.el)}},{key:"render",value:function(){return M.a.createPortal(this.props.children,this.el)}}]),a}(s.a.Component),J=(a(465),a(466),Object(x.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e(Object(y.a)(t))}}}))((function(e){var t=e.user,a=e.dispProfile,s=Object(i.useRef)(null),c=Object(i.useState)(null),o=Object(n.a)(c,2),l=o[0],u=o[1],d=l?URL.createObjectURL(l):"".concat(O,"/profile/").concat(t.image);return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:"card-container",style:{zIndex:"100"},children:[Object(r.jsx)("span",{onClick:function(){return a(!1)},children:"\xd7"}),Object(r.jsxs)("div",{className:"upper-container",children:[Object(r.jsxs)("div",{className:"image-container",children:[Object(r.jsx)("img",{src:d}),":"]}),Object(r.jsx)("a",{onClick:function(){localStorage.clear(),Object(y.a)(null)},href:"",className:"f6 pointer link dim ph3 pv2 mb2 dib white bg-dark-gray",children:"Sign Out"}),Object(r.jsxs)("div",{style:{float:"right",padding:"20px",marginRight:"80px"},children:[Object(r.jsx)("h3",{children:t.userName}),Object(r.jsx)("h4",{children:t.email})]}),l?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("i",{className:"fa fa-upload",style:{position:"relative",left:"40%",top:"35%"},onClick:function(e){if(l){var t=new FormData;t.append("img",l),f()({url:"".concat(O,"/user/uploadProfileImage"),method:"POST",headers:{"Content-Type":"multipart/form-data",Authorization:JSON.parse(localStorage.getItem("$token$"))},data:t}).then((function(e){g("Successfully Updated"),Object(y.a)(e),u(null)})).catch((function(e){j(e)}))}}}),Object(r.jsx)("i",{className:"fa fa-backspace",style:{position:"relative",left:"45%",top:"35%"},onClick:function(e){u(null)}})]}):Object(r.jsx)("i",{className:"fa fa-camera",style:{position:"relative",left:"30%",top:"0%"},onClick:function(){s.current.click()}}),Object(r.jsx)("input",{type:"file",onChange:function(e){u(e.target.files[0])},style:{display:"none"},ref:s})]}),Object(r.jsxs)("div",{className:"lower-container",children:[Object(r.jsx)("div",{children:Object(r.jsx)("p",{children:"Favorite Musics"})}),Object(r.jsx)("div",{className:"box",children:Object(r.jsx)("ul",{children:t.songs.length>0?t.songs.map((function(e,t){return Object(r.jsxs)("li",{children:[Object(r.jsx)("span",{children:e.emotion}),e.title]},e._id)})):Object(r.jsx)("li",{children:"None"})})})]})]})})}))),z=s.a.createContext();t.b=Object(x.b)(null,(function(e){return{setUser:function(t){return e(Object(y.a)(t))}}}))((function(e){var t=e.setUser,a=Object(i.useState)(null),s=Object(n.a)(a,2),c=s[0],o=s[1],l=Object(i.useState)(!1),u=Object(n.a)(l,2),d=u[0],m=u[1],p=Object(i.useState)(!1),h=Object(n.a)(p,2),j=h[0],g=h[1],v=Object(i.useState)(!1),y=Object(n.a)(v,2),x=y[0],w=y[1];Object(i.useEffect)((function(){JSON.parse(localStorage.getItem("$token$"))&&f()({url:"".concat(O,"/user/loginWithJWT"),method:"GET",headers:{"Content-Type":"application/json",Authorization:JSON.parse(localStorage.getItem("$token$"))},data:{}}).then((function(e){console.log(e.data),t(e.data)})).catch((function(e){localStorage.clear()}))}),[JSON.parse(localStorage.getItem("$token$"))]);var k=function(e){g(e)},S=function(e){w(e)},N=function(e){m(e)};return Object(r.jsxs)(r.Fragment,{children:[d?Object(r.jsx)(K,{children:Object(r.jsx)(_,{setEmPl:function(e){o(e),m(!1)},findEmotion:N})}):null,j?Object(r.jsx)(K,{children:Object(r.jsx)(L,{dispForm:k})}):null,x?Object(r.jsx)(J,{dispProfile:S}):null,Object(r.jsx)(z.Provider,{value:k,children:Object(r.jsx)(C,{allSongs:D,findEmotion:N,playlistFromEmotion:c,dispProfile:S})}),Object(r.jsx)(b.a,{})]})}))},426:function(e,t,a){},427:function(e,t,a){},450:function(e,t){},451:function(e,t){},459:function(e,t){},461:function(e,t){},462:function(e,t){},468:function(e,t){},470:function(e,t){},480:function(e,t){},482:function(e,t){},507:function(e,t){},509:function(e,t){},510:function(e,t){},516:function(e,t){},518:function(e,t){},536:function(e,t){},538:function(e,t){},550:function(e,t){},553:function(e,t){},575:function(e,t){},577:function(e,t){},601:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a(19),i=a.n(r),s=a(82),c=a.n(s),o=(a(426),a(375)),l=function(e){e&&e instanceof Function&&a.e(8).then(a.bind(null,608)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),i(e),s(e)}))},u=a(100),d=a(177),m=a(397),p=a(398),f=a(60),b=a(230),h={user:{},getUserLoading:!0},j=a(2),g=a.n(j),v=a(12),O=a(399),_=a.n(O).a.generateVAPIDKeys().publicKey;var y=Object(m.createLogger)(),x=Object(d.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.a:return Object(f.a)(Object(f.a)({},e),{},{user:t.payload,getUserLoading:!1});default:return e}}),Object(d.a)(p.a,y));c.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(u.a,{store:x,children:Object(n.jsx)(o.b,{})})}),document.getElementById("root")),l(),function(){var e=function(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(t),n=new Uint8Array(a.length),r=0;r<a.length;++r)n[r]=a.charCodeAt(r);return n}(_),t="".concat("/EmotionBasedMusicPlayerFE","/sw.js");navigator.serviceWorker.register(t).then(function(){var t=Object(v.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",a.pushManager.getSubscription().then((function(t){return a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:e})})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.error(e)}))}()}},[[601,1,2]]]);
//# sourceMappingURL=main.0b209043.chunk.js.map